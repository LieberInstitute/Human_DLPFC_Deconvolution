**** Job starts ****
Fri Jan  5 02:30:01 PM EST 2024
**** JHPCE info ****
User: lhuuki
Job id: 1433304
Job name: 06_deconvolution_BayesPrism_example
Node name: compute-062
Task id: 
Unloading conda_R/4.3.x
Loading conda_R/4.3.x

Currently Loaded Modules:
  1) JHPCE_ROCKY9_DEFAULT_ENV   3) ruby/3.2.2     5) conda/3-23.3.1
  2) JHPCE_tools/3.0            4) rmate/1.5.10   6) conda_R/4.3.x

 

Loading required package: snowfall
Loading required package: snow
Loading required package: NMF
Loading required package: registry
Loading required package: rngtools
Loading required package: cluster
NMF - BioConductor layer [OK] | Shared memory capabilities [OK] | Cores 2/2
Warning messages:
1: replacing previous import ‘gplots::lowess’ by ‘stats::lowess’ when loading ‘BayesPrism’ 
2: replacing previous import ‘BiocParallel::register’ by ‘NMF::register’ when loading ‘BayesPrism’ 
Loading required package: SummarizedExperiment
Loading required package: MatrixGenerics
Loading required package: matrixStats

Attaching package: ‘matrixStats’

The following objects are masked from ‘package:Biobase’:

    anyMissing, rowMedians


Attaching package: ‘MatrixGenerics’

The following objects are masked from ‘package:matrixStats’:

    colAlls, colAnyNAs, colAnys, colAvgsPerRowSet, colCollapse,
    colCounts, colCummaxs, colCummins, colCumprods, colCumsums,
    colDiffs, colIQRDiffs, colIQRs, colLogSumExps, colMadDiffs,
    colMads, colMaxs, colMeans2, colMedians, colMins, colOrderStats,
    colProds, colQuantiles, colRanges, colRanks, colSdDiffs, colSds,
    colSums2, colTabulates, colVarDiffs, colVars, colWeightedMads,
    colWeightedMeans, colWeightedMedians, colWeightedSds,
    colWeightedVars, rowAlls, rowAnyNAs, rowAnys, rowAvgsPerColSet,
    rowCollapse, rowCounts, rowCummaxs, rowCummins, rowCumprods,
    rowCumsums, rowDiffs, rowIQRDiffs, rowIQRs, rowLogSumExps,
    rowMadDiffs, rowMads, rowMaxs, rowMeans2, rowMedians, rowMins,
    rowOrderStats, rowProds, rowQuantiles, rowRanges, rowRanks,
    rowSdDiffs, rowSds, rowSums2, rowTabulates, rowVarDiffs, rowVars,
    rowWeightedMads, rowWeightedMeans, rowWeightedMedians,
    rowWeightedSds, rowWeightedVars

The following object is masked from ‘package:Biobase’:

    rowMedians

Loading required package: GenomicRanges
Loading required package: stats4
Loading required package: S4Vectors

Attaching package: ‘S4Vectors’

The following object is masked from ‘package:NMF’:

    nrun

The following object is masked from ‘package:utils’:

    findMatches

The following objects are masked from ‘package:base’:

    expand.grid, I, unname

Loading required package: IRanges
Loading required package: GenomeInfoDb
here() starts at /dcs04/lieber/lcolladotor/deconvolution_LIBD4030/Human_DLPFC_Deconvolution
Loading objects:
  sc.dat
  bk.dat
  cell.type.labels
  cell.state.labels
[1]   169 60483
                             ENSG00000000003.13 ENSG00000000005.5
TCGA-06-2563-01A-01R-1849-01               5033                12
TCGA-06-0749-01A-01R-1849-01               3422                62
TCGA-06-5418-01A-01R-1849-01               4976                17
TCGA-06-0211-01B-01R-1849-01               5770                 5
TCGA-19-2625-01A-01R-1850-01               3580                18
                             ENSG00000000419.11 ENSG00000000457.12
TCGA-06-2563-01A-01R-1849-01               1536                646
TCGA-06-0749-01A-01R-1849-01                934                479
TCGA-06-5418-01A-01R-1849-01               1654                517
TCGA-06-0211-01B-01R-1849-01               1546                742
TCGA-19-2625-01A-01R-1850-01               1106                730
                             ENSG00000000460.15
TCGA-06-2563-01A-01R-1849-01                424
TCGA-06-0749-01A-01R-1849-01                141
TCGA-06-5418-01A-01R-1849-01                324
TCGA-06-0211-01B-01R-1849-01                745
TCGA-19-2625-01A-01R-1850-01                411
[1] "matrix" "array" 
[1] 23793 60294
[1] "matrix" "array" 
[1] 23793
2024-01-05 14:31:50.648978- Examine Data
EMSEMBLE IDs detected.
EMSEMBLE IDs detected.
EMSEMBLE IDs detected.
number of genes filtered in each category: 
      Rb      Mrp other_Rb     chrM   MALAT1     chrX     chrY 
      89       78     1011       37        1     2464      594 
A total of  4214  genes from Rb Mrp other_Rb chrM MALAT1 chrX chrY  have been excluded 
A total of  24343  gene expressed in fewer than  5  cells have been excluded 
EMSEMBLE IDs detected.
EMSEMBLE IDs detected.
number of genes retained in each category: 

protein_coding 
         16148 
2024-01-05 14:33:52.265544- get.exp.stat
number of markers selected for each cell type: 
tumor :  8686 
myeloid :  575 
pericyte :  114 
endothelial :  244 
tcell :  123 
oligo :  86 
2024-01-05 14:48:33.0927- Build prism object
number of cells in each cell state 
cell.state.labels
PJ017-tumor-6 PJ032-tumor-5     myeloid_8 PJ032-tumor-4 PJ032-tumor-3 
           22            41            49            57            62 
PJ017-tumor-5         tcell PJ032-tumor-2 PJ030-tumor-5     myeloid_7 
           64            67            72            73            75 
PJ035-tumor-8 PJ017-tumor-4 PJ017-tumor-3 PJ017-tumor-2 PJ017-tumor-0 
           81            83            89           101           107 
PJ017-tumor-1 PJ018-tumor-5     myeloid_6     myeloid_5 PJ035-tumor-7 
          107           113           130           141           150 
        oligo PJ048-tumor-8 PJ032-tumor-1 PJ032-tumor-0 PJ048-tumor-7 
          160           169           171           195           228 
PJ025-tumor-9 PJ035-tumor-6 PJ048-tumor-6 PJ016-tumor-6 PJ018-tumor-4 
          236           241           244           261           262 
    myeloid_4 PJ048-tumor-5 PJ048-tumor-4 PJ016-tumor-5 PJ025-tumor-8 
          266           277           303           308           319 
PJ048-tumor-3 PJ035-tumor-5 PJ030-tumor-4 PJ018-tumor-3 PJ016-tumor-4 
          333           334           348           361           375 
PJ025-tumor-7     myeloid_3 PJ035-tumor-4     myeloid_2 PJ025-tumor-6 
          381           382           385           386           397 
PJ018-tumor-2 PJ030-tumor-3 PJ016-tumor-3 PJ025-tumor-5 PJ030-tumor-2 
          403           419           420           421           425 
PJ018-tumor-1 PJ035-tumor-3 PJ048-tumor-2 PJ018-tumor-0 PJ048-tumor-1 
          429           435           437           444           463 
PJ035-tumor-2 PJ035-tumor-1 PJ016-tumor-2 PJ030-tumor-1      pericyte 
          471           474           481           482           489 
  endothelial PJ035-tumor-0 PJ025-tumor-4     myeloid_1 PJ048-tumor-0 
          492           512           523           526           545 
    myeloid_0 PJ030-tumor-0 PJ025-tumor-3 PJ016-tumor-1 PJ016-tumor-0 
          550           563           601           619           621 
PJ025-tumor-2 PJ025-tumor-1 PJ025-tumor-0 
          630           941           971 
Number of outlier genes filtered from mixture = 6 
Aligning reference and mixture... 
Normalizing reference... 
2024-01-05 14:49:15.339606- Run Prism
Run Gibbs sampling... 
Current time:  2024-01-05 14:50:01.981587 
Estimated time to complete:  1hrs 36mins 
Estimated finishing time:  2024-01-05 16:25:32.221587 
Start run... 
R Version:  R version 4.3.2 Patched (2023-11-13 r85524) 

snowfall 1.84-6.3 initialized (using snow 0.4-4): parallel execution on 50 CPUs.


Stopping cluster

Update the reference matrix ... 
snowfall 1.84-6.3 initialized (using snow 0.4-4): parallel execution on 50 CPUs.


Stopping cluster

Run Gibbs sampling using updated reference ... 
Current time:  2024-01-06 20:03:26.229783 
Estimated time to complete:  42mins 
Estimated finishing time:  2024-01-06 20:44:41.749783 
Start run... 
snowfall 1.84-6.3 initialized (using snow 0.4-4): parallel execution on 50 CPUs.


Stopping cluster

Warning messages:
1: In searchCommandline(parallel, cpus = cpus, type = type, socketHosts = socketHosts,  :
  Unknown option on commandline: --file
2: In searchCommandline(parallel, cpus = cpus, type = type, socketHosts = socketHosts,  :
  Unknown option on commandline: --file
3: In searchCommandline(parallel, cpus = cpus, type = type, socketHosts = socketHosts,  :
  Unknown option on commandline: --file
2024-01-07 09:18:26.415612- Saving
[1] "Reproducibility information:"
[1] "2024-01-07 09:21:19 EST"
      user     system    elapsed 
  1254.672    105.228 154264.388 
─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.3.2 Patched (2023-11-13 r85524)
 os       Rocky Linux 9.2 (Blue Onyx)
 system   x86_64, linux-gnu
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       US/Eastern
 date     2024-01-07
 pandoc   3.1.3 @ /jhpce/shared/community/core/conda_R/4.3.x/bin/pandoc

─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
 package              * version   date (UTC) lib source
 abind                  1.4-5     2016-07-21 [2] CRAN (R 4.3.2)
 BayesPrism           * 2.1.1     2023-12-06 [1] Github (Danko-Lab/BayesPrism@f98bd4d)
 beachmat               2.18.0    2023-10-24 [2] Bioconductor
 bigmemory            * 4.6.1     2022-05-02 [2] CRAN (R 4.3.2)
 bigmemory.sri          0.1.6     2022-11-09 [2] CRAN (R 4.3.2)
 Biobase              * 2.62.0    2023-10-24 [2] Bioconductor
 BiocGenerics         * 0.48.1    2023-11-01 [2] Bioconductor
 BiocManager            1.30.22   2023-08-08 [2] CRAN (R 4.3.2)
 BiocNeighbors          1.20.0    2023-10-24 [2] Bioconductor
 BiocParallel           1.36.0    2023-10-24 [2] Bioconductor
 BiocSingular           1.18.0    2023-10-24 [2] Bioconductor
 bitops                 1.0-7     2021-04-24 [2] CRAN (R 4.3.2)
 bluster                1.12.0    2023-10-24 [2] Bioconductor
 caTools                1.18.2    2021-03-28 [2] CRAN (R 4.3.2)
 cli                    3.6.2     2023-12-11 [1] CRAN (R 4.3.2)
 cluster              * 2.1.4     2022-08-22 [3] CRAN (R 4.3.2)
 codetools              0.2-19    2023-02-01 [3] CRAN (R 4.3.2)
 colorspace             2.1-0     2023-01-23 [2] CRAN (R 4.3.2)
 crayon                 1.5.2     2022-09-29 [2] CRAN (R 4.3.2)
 DelayedArray           0.28.0    2023-10-24 [2] Bioconductor
 DelayedMatrixStats     1.24.0    2023-10-24 [2] Bioconductor
 digest                 0.6.33    2023-07-07 [2] CRAN (R 4.3.2)
 doParallel             1.0.17    2022-02-07 [2] CRAN (R 4.3.2)
 dplyr                  1.1.3     2023-09-03 [2] CRAN (R 4.3.2)
 dqrng                  0.3.2     2023-11-29 [1] CRAN (R 4.3.2)
 edgeR                  4.0.2     2023-11-19 [1] Bioconductor 3.18 (R 4.3.2)
 fansi                  1.0.6     2023-12-08 [1] CRAN (R 4.3.2)
 foreach                1.5.2     2022-02-02 [2] CRAN (R 4.3.2)
 generics               0.1.3     2022-07-05 [2] CRAN (R 4.3.2)
 GenomeInfoDb         * 1.38.5    2023-12-28 [1] Bioconductor 3.18 (R 4.3.2)
 GenomeInfoDbData       1.2.11    2023-11-15 [2] Bioconductor
 GenomicRanges        * 1.54.1    2023-10-29 [2] Bioconductor
 ggplot2                3.4.4     2023-10-12 [2] CRAN (R 4.3.2)
 glue                   1.6.2     2022-02-24 [2] CRAN (R 4.3.2)
 gplots                 3.1.3     2022-04-25 [2] CRAN (R 4.3.2)
 gridBase               0.4-7     2014-02-24 [1] CRAN (R 4.3.2)
 gtable                 0.3.4     2023-08-21 [2] CRAN (R 4.3.2)
 gtools                 3.9.5     2023-11-20 [1] CRAN (R 4.3.2)
 here                 * 1.0.1     2020-12-13 [2] CRAN (R 4.3.2)
 igraph                 1.5.1     2023-08-10 [2] CRAN (R 4.3.2)
 IRanges              * 2.36.0    2023-10-24 [2] Bioconductor
 irlba                  2.3.5.1   2022-10-03 [2] CRAN (R 4.3.2)
 iterators              1.0.14    2022-02-05 [2] CRAN (R 4.3.2)
 KernSmooth             2.23-22   2023-07-10 [3] CRAN (R 4.3.2)
 lattice                0.22-5    2023-10-24 [3] CRAN (R 4.3.2)
 lifecycle              1.0.4     2023-11-07 [2] CRAN (R 4.3.2)
 limma                  3.58.1    2023-10-31 [2] Bioconductor
 locfit                 1.5-9.8   2023-06-11 [2] CRAN (R 4.3.2)
 magrittr               2.0.3     2022-03-30 [2] CRAN (R 4.3.2)
 Matrix                 1.6-3     2023-11-14 [3] CRAN (R 4.3.2)
 MatrixGenerics       * 1.14.0    2023-10-24 [2] Bioconductor
 matrixStats          * 1.2.0     2023-12-11 [1] CRAN (R 4.3.2)
 metapod                1.10.0    2023-10-24 [2] Bioconductor
 munsell                0.5.0     2018-06-12 [2] CRAN (R 4.3.2)
 NMF                  * 0.26      2023-03-20 [1] CRAN (R 4.3.2)
 pillar                 1.9.0     2023-03-22 [2] CRAN (R 4.3.2)
 pkgconfig              2.0.3     2019-09-22 [2] CRAN (R 4.3.2)
 plyr                   1.8.9     2023-10-02 [2] CRAN (R 4.3.2)
 R6                     2.5.1     2021-08-19 [2] CRAN (R 4.3.2)
 RColorBrewer           1.1-3     2022-04-03 [2] CRAN (R 4.3.2)
 Rcpp                   1.0.11    2023-07-06 [2] CRAN (R 4.3.2)
 RCurl                  1.98-1.13 2023-11-02 [2] CRAN (R 4.3.2)
 registry             * 0.5-1     2019-03-05 [2] CRAN (R 4.3.2)
 reshape2               1.4.4     2020-04-09 [2] CRAN (R 4.3.2)
 rlang                  1.1.2     2023-11-04 [2] CRAN (R 4.3.2)
 rngtools             * 1.5.2     2021-09-20 [2] CRAN (R 4.3.2)
 rprojroot              2.0.4     2023-11-05 [2] CRAN (R 4.3.2)
 rsvd                   1.0.5     2021-04-16 [2] CRAN (R 4.3.2)
 S4Arrays               1.2.0     2023-10-24 [2] Bioconductor
 S4Vectors            * 0.40.2    2023-11-23 [1] Bioconductor 3.18 (R 4.3.2)
 ScaledMatrix           1.10.0    2023-10-24 [2] Bioconductor
 scales                 1.3.0     2023-11-28 [1] CRAN (R 4.3.2)
 scran                  1.30.0    2023-10-24 [2] Bioconductor
 scuttle                1.12.0    2023-10-24 [2] Bioconductor
 sessioninfo          * 1.2.2     2021-12-06 [2] CRAN (R 4.3.2)
 SingleCellExperiment * 1.24.0    2023-10-24 [2] Bioconductor
 snow                 * 0.4-4     2021-10-27 [2] CRAN (R 4.3.2)
 snowfall             * 1.84-6.3  2023-11-26 [1] CRAN (R 4.3.2)
 SparseArray            1.2.3     2023-12-25 [1] Bioconductor 3.18 (R 4.3.2)
 sparseMatrixStats      1.14.0    2023-10-24 [2] Bioconductor
 statmod                1.5.0     2023-01-06 [2] CRAN (R 4.3.2)
 stringi                1.8.2     2023-11-23 [1] CRAN (R 4.3.2)
 stringr                1.5.1     2023-11-14 [2] CRAN (R 4.3.2)
 SummarizedExperiment * 1.32.0    2023-10-24 [2] Bioconductor
 synchronicity        * 1.3.5     2018-08-21 [2] CRAN (R 4.3.2)
 tibble                 3.2.1     2023-03-20 [2] CRAN (R 4.3.2)
 tidyselect             1.2.0     2022-10-10 [2] CRAN (R 4.3.2)
 utf8                   1.2.4     2023-10-22 [2] CRAN (R 4.3.2)
 uuid                   1.1-1     2023-08-17 [2] CRAN (R 4.3.2)
 vctrs                  0.6.5     2023-12-01 [1] CRAN (R 4.3.2)
 XVector                0.42.0    2023-10-24 [2] Bioconductor
 zlibbioc               1.48.0    2023-10-24 [2] Bioconductor

 [1] /users/lhuuki/R/4.3.x
 [2] /jhpce/shared/community/core/conda_R/4.3.x/R/lib64/R/site-library
 [3] /jhpce/shared/community/core/conda_R/4.3.x/R/lib64/R/library

──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
**** Job ends ****
Sun Jan  7 09:21:23 AM EST 2024
